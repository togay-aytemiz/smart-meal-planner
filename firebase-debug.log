[debug] [2026-01-11T06:18:56.683Z] ----------------------------------------------------------------------
[debug] [2026-01-11T06:18:56.684Z] Command:       /Users/togay/.local/share/fnm/node-versions/v22.21.1/installation/bin/node /Users/togay/.local/state/fnm_multishells/64617_1768085398857/bin/firebase deploy --only functions
[debug] [2026-01-11T06:18:56.685Z] CLI Version:   15.2.1
[debug] [2026-01-11T06:18:56.685Z] Platform:      darwin
[debug] [2026-01-11T06:18:56.685Z] Node Version:  v22.21.1
[debug] [2026-01-11T06:18:56.685Z] Time:          Sun Jan 11 2026 09:18:56 GMT+0300 (GMT+03:00)
[debug] [2026-01-11T06:18:56.685Z] ----------------------------------------------------------------------
[debug] 
[debug] [2026-01-11T06:18:57.497Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2026-01-11T06:18:57.497Z] > authorizing via signed-in user (togayaytemiz@gmail.com)
[debug] [2026-01-11T06:18:57.497Z] [iam] checking project smart-meal-planner-8d799 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2026-01-11T06:18:57.498Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:57.498Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:57.498Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions [none]
[debug] [2026-01-11T06:18:57.498Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions x-goog-quota-user=projects/smart-meal-planner-8d799
[debug] [2026-01-11T06:18:57.499Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2026-01-11T06:18:58.412Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions 200
[debug] [2026-01-11T06:18:58.413Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2026-01-11T06:18:58.413Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:58.413Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:58.413Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2026-01-11T06:18:58.413Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2026-01-11T06:18:59.398Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2026-01-11T06:18:59.398Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2026-01-11T06:18:59.399Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smart-meal-planner-8d799/serviceAccounts/smart-meal-planner-8d799@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smart-meal-planner-8d799'...
[info] 
[info] i  deploying functions 
[debug] [2026-01-11T06:18:59.402Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:59.403Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:59.403Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 [none]
[debug] [2026-01-11T06:18:59.621Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 200
[debug] [2026-01-11T06:18:59.621Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 {"projectNumber":"39559179692","projectId":"smart-meal-planner-8d799","lifecycleState":"ACTIVE","name":"smart-meal-planner","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2026-01-09T13:21:07.585628Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2026-01-11T06:18:59.623Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:59.623Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:18:59.623Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/adminSdkConfig [none]
[debug] [2026-01-11T06:19:00.039Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/adminSdkConfig 200
[debug] [2026-01-11T06:19:00.039Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/adminSdkConfig {"projectId":"smart-meal-planner-8d799","storageBucket":"smart-meal-planner-8d799.firebasestorage.app"}
[debug] [2026-01-11T06:19:00.040Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:00.041Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:00.041Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/configs [none]
[debug] [2026-01-11T06:19:00.532Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/configs 200
[debug] [2026-01-11T06:19:00.532Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smart-meal-planner-8d799/configs {}
[debug] [2026-01-11T06:19:00.535Z] Validating nodejs source
[debug] [2026-01-11T06:19:01.224Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "Smart Meal Planner - Firebase Cloud Functions",
  "scripts": {
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log",
    "lint": "eslint src --ext .ts",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google/generative-ai": "^0.2.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^7.0.3",
    "openai": "^4.20.0"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "eslint": "^8.55.0",
    "typescript": "^5.3.0"
  },
  "private": true
}
[debug] [2026-01-11T06:19:01.225Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2026-01-11T06:19:01.225Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-01-11T06:19:01.243Z] Found firebase-functions binary at '/Users/togay/Desktop/smart-meal-planner/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8992

[debug] [2026-01-11T06:19:01.609Z] Got response from /__/functions.yaml {"endpoints":{"health":{"availableMemoryMb":512,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY"},{"key":"GEMINI_API_KEY"}],"labels":{},"httpsTrigger":{},"entryPoint":"health"},"testGemini":{"availableMemoryMb":512,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY"},{"key":"GEMINI_API_KEY"}],"labels":{},"callableTrigger":{},"entryPoint":"testGemini"},"testOpenAI":{"availableMemoryMb":512,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY"},{"key":"GEMINI_API_KEY"}],"labels":{},"callableTrigger":{},"entryPoint":"testOpenAI"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"type":"secret","name":"OPENAI_API_KEY"},{"type":"secret","name":"GEMINI_API_KEY"}]}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2026-01-11T06:19:05.632Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2026-01-11T06:19:05.632Z] > authorizing via signed-in user (togayaytemiz@gmail.com)
[debug] [2026-01-11T06:19:05.632Z] [iam] checking project smart-meal-planner-8d799 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2026-01-11T06:19:05.632Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:05.632Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:05.632Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions [none]
[debug] [2026-01-11T06:19:05.632Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions x-goog-quota-user=projects/smart-meal-planner-8d799
[debug] [2026-01-11T06:19:05.632Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2026-01-11T06:19:06.514Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions 200
[debug] [2026-01-11T06:19:06.514Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2026-01-11T06:19:06.514Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:06.515Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:06.515Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smart-meal-planner-8d799/instances pageSize=100&pageToken=
[debug] [2026-01-11T06:19:07.611Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smart-meal-planner-8d799/instances 200
[debug] [2026-01-11T06:19:07.612Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smart-meal-planner-8d799/instances {}
[debug] [2026-01-11T06:19:07.613Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:07.613Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:07.614Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY [none]
[debug] [2026-01-11T06:19:08.185Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY 200
[debug] [2026-01-11T06:19:08.185Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY {"name":"projects/39559179692/secrets/OPENAI_API_KEY","replication":{"automatic":{}},"createTime":"2026-01-11T06:17:54.876692Z","labels":{"firebase-managed":"functions"},"etag":"\"164816b817ea83\""}
[debug] [2026-01-11T06:19:08.185Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.185Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.186Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest [none]
[debug] [2026-01-11T06:19:08.592Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest 200
[debug] [2026-01-11T06:19:08.592Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest {"name":"projects/39559179692/secrets/OPENAI_API_KEY/versions/1","createTime":"2026-01-11T06:18:02.675779Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"164816b8882a43\""}
[debug] [2026-01-11T06:19:08.593Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.593Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.593Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY [none]
[debug] [2026-01-11T06:19:08.821Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY 200
[debug] [2026-01-11T06:19:08.821Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY {"name":"projects/39559179692/secrets/GEMINI_API_KEY","replication":{"automatic":{}},"createTime":"2026-01-10T22:17:40.674987Z","labels":{"firebase-managed":"functions"},"etag":"\"16481002ad2762\""}
[debug] [2026-01-11T06:19:08.822Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.822Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:08.822Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest [none]
[debug] [2026-01-11T06:19:09.029Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest 200
[debug] [2026-01-11T06:19:09.029Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest {"name":"projects/39559179692/secrets/GEMINI_API_KEY/versions/1","createTime":"2026-01-10T22:18:02.692427Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"16481003eb4b4b\""}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/togay/Desktop/smart-meal-planner/functions (118.6 KB) for uploading 
[debug] [2026-01-11T06:19:09.074Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:09.074Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:09.075Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smart-meal-planner-8d799/locations/-/functions [none]
[debug] [2026-01-11T06:19:09.745Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smart-meal-planner-8d799/locations/-/functions 200
[debug] [2026-01-11T06:19:09.745Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smart-meal-planner-8d799/locations/-/functions {}
[debug] [2026-01-11T06:19:09.746Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:09.746Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:09.746Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2026-01-11T06:19:10.785Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/-/functions 200
[debug] [2026-01-11T06:19:10.786Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/-/functions {"functions":[{"name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testGemini","buildConfig":{"build":"projects/39559179692/locations/us-central1/builds/40c24594-2f6d-4ba3-94c2-61a72a2ace2f","runtime":"nodejs20","entryPoint":"testGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testGemini/function-source.zip","generation":"1768086839381617"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smart-meal-planner-8d799/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testGemini/function-source.zip","generation":"1768086839381617"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testgemini","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testGemini","FUNCTION_TARGET":"testGemini","LOG_EXECUTION_ID":"true","FUNCTION_SIGNATURE_TYPE":"http"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://testgemini-em6unz2x2a-uc.a.run.app","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"revision":"testgemini-00002-mih","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2026-01-10T23:14:07.299867098Z","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"9cabd48a4e26fc4424734477e52335b2ac4e1356"},"environment":"GEN_2","url":"https://us-central1-smart-meal-planner-8d799.cloudfunctions.net/testGemini","createTime":"2026-01-10T22:31:52.374463488Z","satisfiesPzi":true},{"name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/health","buildConfig":{"build":"projects/39559179692/locations/us-central1/builds/40c24594-2f6d-4ba3-94c2-61a72a2ace2f","runtime":"nodejs20","entryPoint":"health","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"health/function-source.zip","generation":"1768086787221863"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smart-meal-planner-8d799/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"health/function-source.zip","generation":"1768086787221863"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/health","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/health","FUNCTION_TARGET":"health","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://health-em6unz2x2a-uc.a.run.app","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"revision":"health-00003-vav","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2026-01-10T23:13:58.210020345Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9cabd48a4e26fc4424734477e52335b2ac4e1356"},"environment":"GEN_2","url":"https://us-central1-smart-meal-planner-8d799.cloudfunctions.net/health","createTime":"2026-01-10T22:30:37.658708284Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2026-01-11T06:19:10.791Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:10.791Z] Checked if tokens are valid: true, expires at: 1768115871956
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2026-01-11T06:19:10.791Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:10.791Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:10.792Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2026-01-11T06:19:10.792Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/39559179692
[debug] [2026-01-11T06:19:10.792Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2026-01-11T06:19:10.793Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2026-01-11T06:19:10.793Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/39559179692
[debug] [2026-01-11T06:19:10.793Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2026-01-11T06:19:11.924Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2026-01-11T06:19:11.925Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-39559179692@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"106323908727166005185"}}
[debug] [2026-01-11T06:19:11.973Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2026-01-11T06:19:11.973Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/39559179692/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-39559179692@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"115123026319328565737"}}
[info] i  functions: ensuring required API secretmanager.googleapis.com is enabled... 
[debug] [2026-01-11T06:19:11.976Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:11.976Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:11.976Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:11.976Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:11.976Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest [none]
[debug] [2026-01-11T06:19:11.977Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest [none]
[debug] [2026-01-11T06:19:12.152Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest 200
[debug] [2026-01-11T06:19:12.152Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY/versions/latest {"name":"projects/39559179692/secrets/OPENAI_API_KEY/versions/1","createTime":"2026-01-11T06:18:02.675779Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"164816b8882a43\""}
[debug] [2026-01-11T06:19:12.152Z] Resolved secret version of OPENAI_API_KEY to 1.
[debug] [2026-01-11T06:19:12.358Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest 200
[debug] [2026-01-11T06:19:12.358Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/GEMINI_API_KEY/versions/latest {"name":"projects/39559179692/secrets/GEMINI_API_KEY/versions/1","createTime":"2026-01-10T22:18:02.692427Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"16481003eb4b4b\""}
[debug] [2026-01-11T06:19:12.359Z] Resolved secret version of GEMINI_API_KEY to 1.
[debug] [2026-01-11T06:19:12.360Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:12.360Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:12.360Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 [none]
[debug] [2026-01-11T06:19:13.278Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 200
[debug] [2026-01-11T06:19:13.278Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smart-meal-planner-8d799 {"projectNumber":"39559179692","projectId":"smart-meal-planner-8d799","lifecycleState":"ACTIVE","name":"smart-meal-planner","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2026-01-09T13:21:07.585628Z"}
[debug] [2026-01-11T06:19:13.278Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.278Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.279Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/39559179692 [none]
[debug] [2026-01-11T06:19:13.590Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/39559179692 403
[debug] [2026-01-11T06:19:13.590Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/39559179692 {"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/39559179692","containerInfo":"39559179692","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","serviceTitle":"Compute Engine API","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}}
[debug] [2026-01-11T06:19:13.590Z] unable to look up default compute service account. Falling back to 39559179692-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/39559179692","containerInfo":"39559179692","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","serviceTitle":"Compute Engine API","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/39559179692 had HTTP Error: 403, Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2026-01-11T06:19:13.590Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.590Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.590Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/39559179692 [none]
[debug] [2026-01-11T06:19:13.786Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/39559179692 403
[debug] [2026-01-11T06:19:13.786Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/39559179692 {"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","containerInfo":"39559179692","serviceTitle":"Compute Engine API","consumer":"projects/39559179692","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}}
[debug] [2026-01-11T06:19:13.786Z] unable to look up default compute service account. Falling back to 39559179692-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","containerInfo":"39559179692","serviceTitle":"Compute Engine API","consumer":"projects/39559179692","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/39559179692 had HTTP Error: 403, Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2026-01-11T06:19:13.786Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.786Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.787Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/39559179692 [none]
[debug] [2026-01-11T06:19:13.978Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/39559179692 403
[debug] [2026-01-11T06:19:13.978Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/39559179692 {"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","containerInfo":"39559179692","consumer":"projects/39559179692","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}}
[debug] [2026-01-11T06:19:13.978Z] unable to look up default compute service account. Falling back to 39559179692-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","containerInfo":"39559179692","consumer":"projects/39559179692","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/39559179692 had HTTP Error: 403, Compute Engine API has not been used in project 39559179692 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=39559179692 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[info] i  functions: ensuring 39559179692-compute@developer.gserviceaccount.com access to secret OPENAI_API_KEY. 
[debug] [2026-01-11T06:19:13.979Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.979Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:13.979Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:getIamPolicy [none]
[debug] [2026-01-11T06:19:14.388Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:getIamPolicy 200
[debug] [2026-01-11T06:19:14.388Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:getIamPolicy {"etag":"ACAB"}
[debug] [2026-01-11T06:19:14.388Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:14.388Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:14.388Z] >>> [apiv2][query] POST https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:setIamPolicy [none]
[debug] [2026-01-11T06:19:14.388Z] >>> [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:setIamPolicy {"policy":{"bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:39559179692-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2026-01-11T06:19:15.033Z] <<< [apiv2][status] POST https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:setIamPolicy 200
[debug] [2026-01-11T06:19:15.034Z] <<< [apiv2][body] POST https://secretmanager.googleapis.com/v1/projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY:setIamPolicy {"version":1,"etag":"BwZIFrzXN2o=","bindings":[{"role":"roles/secretmanager.secretAccessor","members":["serviceAccount:39559179692-compute@developer.gserviceaccount.com"]}]}
[info] ✔  secretmanager: Granted roles/secretmanager.secretAccessor on projects/smart-meal-planner-8d799/secrets/OPENAI_API_KEY to 39559179692-compute@developer.gserviceaccount.com 
[info] ✔  functions: ensured 39559179692-compute@developer.gserviceaccount.com access to OPENAI_API_KEY. 
[debug] [2026-01-11T06:19:15.036Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:15.037Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:15.037Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smart-meal-planner-8d799/billingInfo [none]
[debug] [2026-01-11T06:19:15.969Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smart-meal-planner-8d799/billingInfo 200
[debug] [2026-01-11T06:19:15.969Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smart-meal-planner-8d799/billingInfo {"name":"projects/smart-meal-planner-8d799/billingInfo","projectId":"smart-meal-planner-8d799","billingAccountName":"billingAccounts/0114A5-037280-53F1FF","billingEnabled":true}
[debug] [2026-01-11T06:19:15.971Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:15.971Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:15.971Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2026-01-11T06:19:16.857Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions:generateUploadUrl 200
[debug] [2026-01-11T06:19:16.857Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com/58f729af-4f37-4bad-b7db-251d5d41b6ba.zip?GoogleAccessId=service-39559179692@gcf-admin-robot.iam.gserviceaccount.com&Expires=1768114156&Signature=qljR4HPcMdfCGe7zgVx1JGleuG945%2BLqdew4lximKc27EKWAKZFocDbYZzmgcb1WaenK97ZnBvYphf7tQnlO%2FUxdxVRubnXcB8UK05GogOdPPIuTotaVCZ8pACB0f9D1xPAB0XVh8E2OR2O2nRnLUcBGE5qW0D5TixsTw54nsGNaqZV5sYMLHv2KrWPfMX8sO5pT2B7dmzwVjyTOunLAUVZoUUj40GiwnXcinVpkpWNPAn1dlgk5weVi%2Bg3dR6dq8c8ZKQWzy61cvPrL%2BFFi4ebgThc0C7l8RHW%2FbIVFgS%2F3rNwQuN3ycWH7iJWAm8vKIKn%2BKYAbbB1Liko%2FMRqKdQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com","object":"58f729af-4f37-4bad-b7db-251d5d41b6ba.zip"}}
[debug] [2026-01-11T06:19:16.858Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com/58f729af-4f37-4bad-b7db-251d5d41b6ba.zip GoogleAccessId=service-39559179692%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1768114156&Signature=qljR4HPcMdfCGe7zgVx1JGleuG945%2BLqdew4lximKc27EKWAKZFocDbYZzmgcb1WaenK97ZnBvYphf7tQnlO%2FUxdxVRubnXcB8UK05GogOdPPIuTotaVCZ8pACB0f9D1xPAB0XVh8E2OR2O2nRnLUcBGE5qW0D5TixsTw54nsGNaqZV5sYMLHv2KrWPfMX8sO5pT2B7dmzwVjyTOunLAUVZoUUj40GiwnXcinVpkpWNPAn1dlgk5weVi%2Bg3dR6dq8c8ZKQWzy61cvPrL%2BFFi4ebgThc0C7l8RHW%2FbIVFgS%2F3rNwQuN3ycWH7iJWAm8vKIKn%2BKYAbbB1Liko%2FMRqKdQ%3D%3D
[debug] [2026-01-11T06:19:16.858Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com/58f729af-4f37-4bad-b7db-251d5d41b6ba.zip [stream]
[debug] [2026-01-11T06:19:17.690Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com/58f729af-4f37-4bad-b7db-251d5d41b6ba.zip 200
[debug] [2026-01-11T06:19:17.690Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com/58f729af-4f37-4bad-b7db-251d5d41b6ba.zip [omitted]
[info] ✔  functions: functions source uploaded successfully 
[info] i  functions: creating Node.js 20 (2nd Gen) function testOpenAI(us-central1)... 
[info] i  functions: updating Node.js 20 (2nd Gen) function health(us-central1)... 
[info] i  functions: updating Node.js 20 (2nd Gen) function testGemini(us-central1)... 
[debug] [2026-01-11T06:19:17.696Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:17.697Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:17.697Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions functionId=testOpenAI
[debug] [2026-01-11T06:19:17.697Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions {"name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-uploads-39559179692.us-central1.cloudfunctions.appspot.com","object":"58f729af-4f37-4bad-b7db-251d5d41b6ba.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","secret":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","version":"1"},{"key":"GEMINI_API_KEY","secret":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","version":"1"}],"ingressSettings":null,"timeoutSeconds":540,"serviceAccountEmail":null,"availableMemory":"512Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"}}
[debug] [2026-01-11T06:19:18.950Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions 200
[debug] [2026-01-11T06:19:18.950Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/functions {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2026-01-11T06:19:18.951Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:18.951Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:18.951Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 [none]
[debug] [2026-01-11T06:19:19.682Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 200
[debug] [2026-01-11T06:19:19.682Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testOpenAI/function-source.zip","generation":"1768112358680257"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testopenai","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"OPENAI_API_KEY","version":"1"},{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2026-01-11T06:19:20.184Z] [create-default-us-central1-testOpenAI] Retrying task index 0
[debug] [2026-01-11T06:19:20.184Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:20.184Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:20.184Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 [none]
[debug] [2026-01-11T06:19:20.922Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 200
[debug] [2026-01-11T06:19:20.922Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testOpenAI/function-source.zip","generation":"1768112358680257"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testopenai","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"OPENAI_API_KEY","version":"1"},{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/90d56286-4e4d-4fb1-84de-b88689762b51?project=39559179692"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51"},"done":false}
[debug] [2026-01-11T06:19:21.923Z] [create-default-us-central1-testOpenAI] Retrying task index 0
[debug] [2026-01-11T06:19:21.923Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:21.923Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:21.923Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 [none]
[debug] [2026-01-11T06:19:22.657Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 200
[debug] [2026-01-11T06:19:22.657Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testOpenAI/function-source.zip","generation":"1768112358680257"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testopenai","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"OPENAI_API_KEY","version":"1"},{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/90d56286-4e4d-4fb1-84de-b88689762b51?project=39559179692"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51"},"done":false}
[debug] [2026-01-11T06:19:24.659Z] [create-default-us-central1-testOpenAI] Retrying task index 0
[debug] [2026-01-11T06:19:24.660Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:24.660Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:24.660Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 [none]
[debug] [2026-01-11T06:19:25.417Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 200
[debug] [2026-01-11T06:19:25.417Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testOpenAI/function-source.zip","generation":"1768112358680257"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testopenai","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"OPENAI_API_KEY","version":"1"},{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/90d56286-4e4d-4fb1-84de-b88689762b51?project=39559179692"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51"},"done":false}
[debug] [2026-01-11T06:19:29.418Z] [create-default-us-central1-testOpenAI] Retrying task index 0
[debug] [2026-01-11T06:19:29.418Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:29.418Z] Checked if tokens are valid: true, expires at: 1768115871956
[debug] [2026-01-11T06:19:29.418Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 [none]
[debug] [2026-01-11T06:19:29.647Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 200
[debug] [2026-01-11T06:19:29.647Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9 {"name":"projects/smart-meal-planner-8d799/locations/us-central1/operations/operation-1768112358388-64816bd0b72e9-08849026-fe59e0b9","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2026-01-11T06:19:18.881512905Z","target":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smart-meal-planner-8d799/locations/us-central1/functions/testOpenAI","buildConfig":{"runtime":"nodejs20","entryPoint":"testOpenAI","source":{"storageSource":{"bucket":"gcf-v2-sources-39559179692-us-central1","object":"testOpenAI/function-source.zip","generation":"1768112358680257"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smart-meal-planner-8d799/serviceAccounts/39559179692-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smart-meal-planner-8d799/locations/us-central1/services/testopenai","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smart-meal-planner-8d799\",\"storageBucket\":\"smart-meal-planner-8d799.firebasestorage.app\"}","GCLOUD_PROJECT":"smart-meal-planner-8d799","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smart-meal-planner-8d799/locations/us-central1/services/testOpenAI","FUNCTION_TARGET":"testOpenAI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"39559179692-compute@developer.gserviceaccount.com","availableMemory":"512Mi","secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"OPENAI_API_KEY","version":"1"},{"key":"GEMINI_API_KEY","projectId":"smart-meal-planner-8d799","secret":"GEMINI_API_KEY","version":"1"}],"maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"171b30cac7d93f503cfbf7bdd59998c999056216"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/90d56286-4e4d-4fb1-84de-b88689762b51?project=39559179692"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/39559179692/locations/us-central1/builds/90d56286-4e4d-4fb1-84de-b88689762b51"},"done":false}
